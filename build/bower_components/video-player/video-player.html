<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../materializecss-styles/materializecss-styles.html"><link rel="import" href="../hax-body-behaviors/hax-body-behaviors.html"><link rel="import" href="../schema-behaviors/schema-behaviors.html"><link rel="import" href="../a11y-behaviors/a11y-behaviors.html"><link rel="import" href="../media-behaviors/media-behaviors.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="../materializecss-styles/colors.html"><link rel="prefetch" href="../materializecss-styles/shapes.html"></head><body><dom-module id="video-player"><template><style include="materializecss-styles">:host{display:block;}:host[responsive] .responsive-video-container{position:relative;padding-bottom:56.25%;margin-top:16px;height:0;}:host[responsive] .responsive-video-container *{position:absolute;top:0;left:0;width:100%;height:100%;}.video-caption{font-style:italic;margin:0;padding:8px;@apply --video-player-caption-theme;}</style><div class="responsive-video-container"><template is="dom-if" if="[[sandboxed]]"><webview resource$="[[schemaResourceID]]-video" src$="[[src]]" width$="[[width]]" height$="[[height]]" frameborder="0"></webview></template><template is="dom-if" if="[[!sandboxed]]"><template is="dom-if" if="[[iframed]]"><iframe resource$="[[schemaResourceID]]-video" src$="[[src]]" width$="[[width]]" height$="[[height]]" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe></template><template is="dom-if" if="[[!iframed]]"><video resource$="[[schemaResourceID]]-video" src$="[[src]]" width$="[[width]]" height$="[[height]]" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" controls=""></video></template></template></div><div id="videocaption" class$="video-caption [[secondaryColorClass]] [[textColorClass]]">[[caption]]<slot name="caption"></slot></div></template><script>Polymer({is:'video-player',behaviors:[HAXBehaviors.PropertiesBehaviors,MaterializeCSSBehaviors.ColorBehaviors,SchemaBehaviors.Schema,A11yBehaviors.A11y,MediaBehaviors.Video],properties:{source:{type:String},src:{type:String,computed:'_computeSRC(source)'},iframed:{type:Boolean,computed:'_computeIframed(source, sandboxed)'},sandboxed:{type:Boolean,computed:'_computeSandboxed(source)'},width:{type:String,value:560},height:{type:String,value:315},responsive:{type:Boolean,reflectToAttribute:!0,value:!0},caption:{type:String},primaryColor:{type:String,value:null,observer:'_primaryColorChanged'},secondaryColor:{type:String,value:null,observer:'_secondaryColorChanged'},textColor:{type:String,value:'#000000'},primaryColorClass:{type:String,computed:'_computeColorClass(primaryColor)'},secondaryColorClass:{type:String,computed:'_computeColorClass(secondaryColor)'},textColorClass:{type:String,computed:'_computeColorClass(textColor)'},ytNocookie:{type:Boolean,value:!0},ytSuggested:{type:Boolean,value:!1},ytControls:{type:Boolean,value:!0},ytTitle:{type:Boolean,value:!1},vimeoTitle:{type:Boolean,value:!1},vimeoByline:{type:Boolean,value:!1},vimeoPortrait:{type:Boolean,value:!1},videoColor:{type:String,value:'FF031D'}},_computeIframed:function(a,b){return this._sourceIsIframe(a)&&!b},_computeSandboxed:function(a){if(this._sourceIsIframe(a)){var b=document.createElement('webview');if('function'===typeof b.reload)return!0}return!1},attached:function(){this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:'Video player',description:'This can present video in a highly accessible manner regardless of source.',icon:'av:play-circle-filled',color:'red',groups:['Video','Media'],handles:[{type:'video',source:'source',title:'caption',caption:'caption',description:'caption',color:'primaryColor'}],meta:{author:'LRNWebComponents'}},settings:{quick:[{property:'responsive',title:'Responsive',description:'The video automatically fills the available area.',inputMethod:'boolean',icon:'image:photo-size-select-small'},{property:'primaryColor',title:'Primary color',description:'Select the primary color used in the video',inputMethod:'colorpicker',icon:'editor:format-color-fill'},{property:'secondaryColor',title:'Secondary color',description:'Select the secondary color used for the video',inputMethod:'colorpicker',icon:'editor:format-color-fill'}],configure:[{property:'source',title:'Source',description:'The URL for this video.',inputMethod:'textfield',icon:'link',required:!0,validationType:'url'},{property:'caption',title:'caption',description:'Simple caption for under video',inputMethod:'textfield',icon:'av:video-label',required:!1,validationType:'text'},{property:'responsive',title:'Responsive',description:'The video automatically fills the available area.',inputMethod:'boolean',icon:'image:photo-size-select-small'},{property:'primaryColor',title:'Primary color',description:'Select the primary color used in the video',inputMethod:'colorpicker',icon:'editor:format-color-fill'},{property:'secondaryColor',title:'Secondary color',description:'Select the secondary color used for the video',inputMethod:'colorpicker',icon:'editor:format-color-fill'}],advanced:[]}})},_computeSRC:function(a){if(('undefined'===typeof a?'undefined':babelHelpers.typeof(a))!=='undefined'){var b=this.getVideoType(a);a=this.cleanVideoSource(a,b),'vimeo'==b?(a+=this.vimeoTitle?'?title=1':'?title=0',a+=this.vimeoByline?'&byline=1':'&byline=0',a+=this.vimeoPortrait?'&portrait=1':'&portrait=0',babelHelpers.typeof(this.videoColor)!=='undefined'&&(a+='&color='+this.videoColor)):'youtube'==b?(this.ytNocookie&&(a=a.replace('youtube.com/embed','youtube-nocookie.com/embed')),a+=this.ytTitle?'?showinfo=1':'?showinfo=0',a+=this.ytControls?'&controls=1':'&controls=0',a+=this.ytSuggested?'&rel=1':'&rel=0'):'dailymotion'==b&&(a+='&ui-start-screen-info=false',a+='&ui-logo=false',a+='&sharing-enable=false',a+='&endscreen-enable=false',babelHelpers.typeof(this.videoColor)!=='undefined'&&(a+='&ui-highlight='+this.videoColor))}return a},_secondaryColorChanged:function(a){('undefined'===typeof a?'undefined':babelHelpers.typeof(a))!=='undefined'&&null!=a&&this.computeTextPropContrast('textColor','secondaryColor')},_primaryColorChanged:function(a){if(null!=a&&babelHelpers.typeof(this.source)!=='undefined'){this.videoColor=a.substring(1);var b=this.source;this.set('source',''),this.set('source',b)}},_computeColorClass:function(a){if(null!=a&&'#ffffff'==a.toLowerCase())return'white-text';return null!=a&&'#000000'==a?'black-text':null!=a&&'#'==a.substring(0,1)?this._colorTransform(a.toLowerCase(),'',''):void 0}});</script></dom-module></body></html>